
<!doctype html>
<html lang="en-GB">
  <head>
    <meta charset="UTF-8">

    <title>Section 2</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes"> 
    <meta name="viewport" content="initial-scale=1" >

    <script src="../assets/javascript/highlight.pack.js" type="text/javascript"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link href='../assets/css/code.css' rel='stylesheet' type='text/css'>
    <link href='../assets/css/site.css' rel='stylesheet' type='text/css'>
    

  </head>

  <body>

    <article class="h-entry">

      <h1 class="p-name">Section 2</br>  Serving static files and templates</h1>
     <!--  <h3 class="p-name">Async Special: Hapi.js Workshop</h3> -->

      <div class="e-content">

        <nav>
          <ul class="tasks">
           <li><a href="#task1">Copying files for this section</a></li>
           <li><a href="#task2">Updating package.js</a></li>
           <li><a href="#task2">Creating routes.js and handler.js</a></li>
           <li><a href="#task3">Server stactic files</a></li>
           <li><a href="#task4">Templates and JSON</a></li>
           <li><a href="#task4">Markdown and Readme</a></li>
          </ul>
        </nav>



      <!--   <p class="h-event"><time class="dt-start" datetime="2014-12-06T01:00:00Z">Saturday 6 Dec 1pm</time> &dash; <time class="dt-end" datetime="2014-12-06T01:00:00Z">5pm</time> at <a href="http://68middle.st/" class="p-location">68 Middle Street, Brighton</a></p> -->

        <section class="task" id="task1" >
          <h3>Copying files for this section</h3>
          <p>We need to copy a number of files and directories from the <strong>hapi-workshop/sections/section2</strong> directory into your <strong>bookmarks</strong> directory.<p>

          <ul>
           <li>Copy the <code>node_modules</code> directory over</li>
           <li>Copy the <code>templates</code> directory over</li>
           <li>Copy the <code>public</code> directory over</li>
          </ul>
        <section>


        <section class="task"  id="task2">  
          <h3>Updating package.js</h3>
          <p>As we have copied over <code>node_modules</code> directory rather use <code>$ npm install</code> we need to manully update the <code>package.json</code> file. Copy the following JSON into your <code>package.json</code> file and save it.<p>

<pre><code class="javascript">
"dependencies": {
    "bcrypt-nodejs": "0.0.x",
    "boom": "2.6.x",
    "good": "4.0.x",
    "good-console": "2.1.x",
    "handlebars": "1.3.x",
    "hapi": "7.5.x",
    "hapi-auth-basic": "1.1.x",
    "hapi-auth-bearer-token": "2.2.x",
    "hapi-auth-cookie": "1.4.x",
    "hapi-swagger": "0.5.x",
    "hoek": "2.10.x",
    "joi": "4.9.x",
    "marked": "0.3.x",
    "mongodb": "1.2.x",
    "rand-token": "0.2.1",
    "shortid": "2.1.x"
  },
  "devDependencies": {
    "grunt": "0.4.x",
    "grunt-contrib-jshint": "0.8.x",
    "grunt-mocha-test": "0.9.x",
    "mocha": "1.17.x",
    "chai": "1.9.x",
    "form-data": "0.1.x"
  },
</code></pre>

        <section>


         <section class="task" id="task1" >
          <h3>Creating routes.js and handler.js</h3>
          <p>We to create two file in our project <code>routes.js</code> and <code>handler.js</code><p>

          <p>In the <code>routes.js</code> add the following code:<p>

<pre><code class="javascript">
'use strict';
var hapi        = require('hapi'),
    Joi         = require('joi'),
    handlers    = require('../lib/handlers.js'),
    routes,
    standardHTTPErrors,
    extendedHTTPErrors;


function init( ){
}


standardHTTPErrors = [
  { code: 400, message: 'Bad Request' },
  { code: 500, message: 'Internal Server Error'}
];

extendedHTTPErrors = [
  { code: 400, message: 'Bad Request' },
  { code: 404, message: 'Not Found' },
  { code: 500, message: 'Internal Server Error'}
];



routes = [{ },]


exports.init = init;
exports.routes = routes;
</code></pre>


          <p>In the <code>handler.js</code> add the following code:<p>

<pre><code class="javascript">
'use strict';

var Fs        = require('fs'),
    Path      = require('path'),
    Hapi      = require('hapi'),
    Boom      = require('boom'),
    Joi       = require('joi'),
    Pack      = require('../package');


function init( ){
}

exports.init = init;

</code></pre>


        <section>


        <section class="task"  id="task3">  
          <h3>Server stactic files</h3>
          <p>In the <code>routes.js</code> file replace the <code>routes</code> property with the code below.<p>

<pre><code class="javascript">
routes = [{
    method: 'GET',
    path: '/{path*}',
    handler: {
      directory: {
        path: './public',
        listing: false,
        index: true
      }
    }
  }]
</code></pre>

        <p>Then restart node <p>

        <section>




        <section class="task"  id="task4">  
          <h3>Running Hapi.js server</h3>
          <p>To start the Hapi.js server<p>

          <ul>
           <li><code>$ node app.js</code></li>
          </ul>

          <p>Then and open <a href="http://localhost:3005/hello">localhost:3005/hello</a> in your browser.</p>


        <section> -->

        <nav class="sectional-nav">
          <a href="../section3/instructions.html">Next &dash; Section 3</a>
        </nav>
   

      </div>  
    </article>



  </body> 

</html>


